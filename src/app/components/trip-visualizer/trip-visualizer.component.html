<!-- <svg viewBox="0 0 1200 250">
    <defs>
        <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
            <path d="M0,0 L0,6 L6,3 z" fill="gray" />
        </marker>
    </defs>

    <ng-container *ngFor="let pos of positions; let i = index">
        <circle [attr.cx]="pos.x" [attr.cy]="pos.y" r="15" [attr.fill]="getColor(pos.trip.level)" />
        <text [attr.x]="pos.x" [attr.y]="pos.y + 5" text-anchor="middle" fill="white" font-size="10">
            {{ pos.trip.display }}
        </text>

        <ng-container *ngIf="i < positions.length - 1">
            <ng-container [ngSwitch]="pos.trip.level">
                <line *ngSwitchCase="1" [attr.x1]="pos.x" [attr.y1]="pos.y" [attr.x2]="positions[i + 1].x"
                    [attr.y2]="positions[i + 1].y" stroke="gray" stroke-width="2" marker-end="url(#arrow)" />
                <path *ngSwitchDefault [attr.d]="getPath(i)" [attr.stroke]="getColor(pos.trip.level)" fill="none"
                    stroke-width="2" marker-end="url(#arrow)" />
            </ng-container>
        </ng-container>
    </ng-container>
</svg> -->

<div class="visualizer">
    <div *ngFor="let pos of positions; let i = index">
      <!-- Trip node -->
      <div
        class="trip-node"
        [ngStyle]="{ left: pos.x + 'px', top: pos.y + 'px', backgroundColor: getColor(pos.trip.level) }">
        {{ pos.trip.display }}
      </div>
  
      <!-- Trip connection (if not last) -->
      <ng-container *ngIf="i < positions.length - 1">
        <div
          class="trip-line"
          [ngClass]="getLineClass(pos.trip.type)"
          [ngStyle]="getLineStyle(i)">
        </div>
      </ng-container>
    </div>
  </div>
  